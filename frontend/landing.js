// Language translations
const translations = {
    en: {
        'nav-home': 'Home',
        'nav-about': 'About',
        'nav-services': 'Services',
        'nav-products': 'Products',
        'nav-contact': 'Contact',
        'hero-title': 'Growing Together',
        'hero-subtitle': 'Empowering Farmers with Modern Agricultural Solutions',
        'hero-cta': 'Get Started',
        'hero-learn': 'Learn More',
        'about-title': 'About Digital Krishi',
        'about-desc': 'We are dedicated to transforming agriculture through technology and sustainable practices. Our mission is to empower farmers with knowledge, tools, and resources to increase productivity while preserving our precious environment.',
        'about-mission': 'Our Mission',
        'about-mission-text': 'To bridge the gap between traditional farming wisdom and modern agricultural technology.',
        'stat-farmers': 'Farmers',
        'stat-products': 'Products',
        'stat-districts': 'Districts',
        'services-title': 'Our Services',
        'service1-title': 'Expert Training',
        'service1-desc': 'Comprehensive workshops on modern farming techniques and sustainable practices.',
        'service2-title': 'Quality Seeds',
        'service2-desc': 'Premium quality seeds and organic fertilizers for better yields.',
        'service3-title': 'Market Access',
        'service3-desc': 'Connect farmers directly with buyers for fair pricing.',
        'products-title': 'Featured Products',
        'product1-name': 'Organic Fertilizer',
        'product1-price': 'Rs. 1,200/bag',
        'product2-name': 'Hybrid Seeds',
        'product2-price': 'Rs. 800/kg',
        'product3-name': 'Bio Pesticides',
        'product3-price': 'Rs. 600/ltr',
        'order-btn': 'Order Now',
        'contact-title': 'Get In Touch',
        'contact-subtitle': 'Have questions? We\'d love to hear from you.',
        'contact-name': 'Your Name',
        'contact-email': 'Your Email',
        'contact-message': 'Your Message',
        'contact-send': 'Send Message',
        'contact-address': 'Kathmandu, Nepal',
        'contact-phone': '+977-1-XXXXXXX',
        'address-label': 'Address',
        'phone-label': 'Phone',
        'email-label': 'Email',
        'footer-tagline': 'Cultivating a sustainable future for Nepali farmers',
        'footer-links': 'Quick Links',
        'footer-social': 'Follow Us',
        'footer-copyright': '© 2026 Digital Krishi. All rights reserved.'
    },
    ne: {
        'nav-home': 'गृहपृष्ठ',
        'nav-about': 'हाम्रो बारे',
        'nav-services': 'सेवाहरू',
        'nav-products': 'उत्पादनहरू',
        'nav-contact': 'सम्पर्क',
        'hero-title': 'सँगै बढ्दै',
        'hero-subtitle': 'आधुनिक कृषि समाधानबाट किसानहरूलाई सशक्त बनाउँदै',
        'hero-cta': 'सुरु गर्नुहोस्',
        'hero-learn': 'थप जान्नुहोस्',
        'about-title': 'डिजिटल कृषिको बारेमा',
        'about-desc': 'हामी प्रविधि र दिगो अभ्यासहरू मार्फत कृषि क्षेत्रमा परिवर्तन ल्याउन प्रतिबद्ध छौं। हाम्रो मिशन भनेको किसानहरूलाई ज्ञान, उपकरण र स्रोतहरू प्रदान गरी उत्पादकत्व बढाउनु र हाम्रो बहुमूल्य वातावरण संरक्षण गर्नु हो।',
        'about-mission': 'हाम्रो लक्ष्य',
        'about-mission-text': 'परम्परागत खेती ज्ञान र आधुनिक कृषि प्रविधि बीचको खाडल कम गर्नु।',
        'stat-farmers': 'किसान',
        'stat-products': 'उत्पादन',
        'stat-districts': 'जिल्ला',
        'services-title': 'हाम्रा सेवाहरू',
        'service1-title': 'विशेषज्ञ तालिम',
        'service1-desc': 'आधुनिक खेती प्रविधि र दिगो अभ्यासमा व्यापक कार्यशालाहरू।',
        'service2-title': 'गुणस्तरीय बीउ',
        'service2-desc': 'राम्रो उत्पादनको लागि उच्च गुणस्तरका बीउ र जैविक मल।',
        'service3-title': 'बजार पहुँच',
        'service3-desc': 'उचित मूल्यको लागि किसानहरूलाई सीधा खरिददारसँग जोड्ने।',
        'products-title': 'विशेष उत्पादनहरू',
        'product1-name': 'जैविक मल',
        'product1-price': 'रु. १,२००/झोला',
        'product2-name': 'हाइब्रिड बीउ',
        'product2-price': 'रु. ८००/के.जी.',
        'product3-name': 'जैविक कीटनाशक',
        'product3-price': 'रु. ६००/लिटर',
        'order-btn': 'अर्डर गर्नुहोस्',
        'contact-title': 'सम्पर्कमा रहनुहोस्',
        'contact-subtitle': 'प्रश्नहरू छन्? हामी तपाईंबाट सुन्न चाहन्छौं।',
        'contact-name': 'तपाईंको नाम',
        'contact-email': 'तपाईंको इमेल',
        'contact-message': 'तपाईंको सन्देश',
        'contact-send': 'सन्देश पठाउनुहोस्',
        'contact-address': 'काठमाडौं, नेपाल',
        'contact-phone': '+९७७-१-XXXXXXX',
        'address-label': 'ठेगाना',
        'phone-label': 'फोन',
        'email-label': 'इमेल',
        'footer-tagline': 'नेपाली किसानहरूको लागि दिगो भविष्य खेती गर्दै',
        'footer-links': 'द्रुत लिङ्कहरू',
        'footer-social': 'हामीलाई फलो गर्नुहोस्',
        'footer-copyright': '© २०२६ डिजिटल कृषि। सबै अधिकार सुरक्षित।'
    }
};

// Current language state
let currentLanguage = 'en';

// DOM Elements
const langBtn = document.getElementById('langBtn');
const langText = document.getElementById('langText');
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const mobileNav = document.getElementById('mobileNav');
const menuIcon = document.getElementById('menuIcon');
const submitBtn = document.getElementById('submitBtn');
const nameInput = document.getElementById('nameInput');
const emailInput = document.getElementById('emailInput');
const messageInput = document.getElementById('messageInput');

// Language Toggle Function
function toggleLanguage() {
    currentLanguage = currentLanguage === 'en' ? 'ne' : 'en';
    updatePageLanguage();
    
    // Update language button text
    langText.textContent = currentLanguage === 'en' ? 'नेपाली' : 'English';
}

// Update all text content on the page
function updatePageLanguage() {
    const elements = document.querySelectorAll('[data-translate]');
    
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
    
    // Update placeholders
    const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
    placeholderElements.forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[currentLanguage][key]) {
            element.placeholder = translations[currentLanguage][key];
        }
    });
}

// Mobile Menu Toggle
function toggleMobileMenu() {
    mobileNav.classList.toggle('active');
    
    // Change icon
    if (mobileNav.classList.contains('active')) {
        menuIcon.classList.remove('fa-bars');
        menuIcon.classList.add('fa-times');
    } else {
        menuIcon.classList.remove('fa-times');
        menuIcon.classList.add('fa-bars');
    }
}

// Close mobile menu when clicking on a link
function closeMobileMenu() {
    mobileNav.classList.remove('active');
    menuIcon.classList.remove('fa-times');
    menuIcon.classList.add('fa-bars');
}

// Contact Form Submit Handler
function handleFormSubmit() {
    const name = nameInput.value.trim();
    const email = emailInput.value.trim();
    const message = messageInput.value.trim();
    
    if (!name || !email || !message) {
        const alertMessage = currentLanguage === 'en' 
            ? 'Please fill in all fields!' 
            : 'कृपया सबै फिल्डहरू भर्नुहोस्!';
        alert(alertMessage);
        return;
    }
    
    // Email validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        const alertMessage = currentLanguage === 'en' 
            ? 'Please enter a valid email address!' 
            : 'कृपया मान्य इमेल ठेगाना प्रविष्ट गर्नुहोस्!';
        alert(alertMessage);
        return;
    }
    
    // Success message
    const successMessage = currentLanguage === 'en' 
        ? 'Message sent successfully!' 
        : 'सन्देश सफलतापूर्वक पठाइयो!';
    alert(successMessage);
    
    // Clear form
    nameInput.value = '';
    emailInput.value = '';
    messageInput.value = '';
}

// Smooth scroll for anchor links
function smoothScroll(e) {
    e.preventDefault();
    const targetId = this.getAttribute('href');
    const targetSection = document.querySelector(targetId);
    
    if (targetSection) {
        targetSection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
        
        // Close mobile menu if open
        closeMobileMenu();
    }
}

// Event Listeners
langBtn.addEventListener('click', toggleLanguage);
mobileMenuBtn.addEventListener('click', toggleMobileMenu);
submitBtn.addEventListener('click', handleFormSubmit);

// Add smooth scroll to all navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', smoothScroll);
});

// Add click event to mobile nav links to close menu
const mobileNavLinks = mobileNav.querySelectorAll('a');
mobileNavLinks.forEach(link => {
    link.addEventListener('click', closeMobileMenu);
});

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Set initial language
    updatePageLanguage();
    
    // Add entrance animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe sections for animations
    document.querySelectorAll('section').forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(section);
    });
});

// Handle Enter key press in form inputs
nameInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        e.preventDefault();
        emailInput.focus();
    }
});

emailInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        e.preventDefault();
        messageInput.focus();
    }
});

messageInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter' && e.ctrlKey) {
        e.preventDefault();
        handleFormSubmit();
    }
});

// Add active state to navigation on scroll
window.addEventListener('scroll', function() {
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('nav a');
    
    let current = '';
    
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        
        if (window.pageYOffset >= sectionTop - 200) {
            current = section.getAttribute('id');
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
        }
    });
});